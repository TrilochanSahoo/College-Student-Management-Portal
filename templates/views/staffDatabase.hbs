<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>staff database</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
    <link rel="stylesheet" href="style/style.css">
</head>
<body>
    {{!-- nav bar --}}
    {{>adminNavbar}}
    
    <main id="staff_site">
        <div class="table_container">
            <div class="box_title">
                <span>Staff Database</span>
            </div>
            <form action="/" method="post">
            <table class="table">
                <thead class="thead">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Department</th>
                        <th>Email</th>
                        <th>Phone No</th>
                        <th>Gender</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {{>staffDetails}}
                </tbody>
            </table>
            </form>
        </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        $ondelete = $(".table tbody td a.delete")
        $ondelete.click(function(){
            event.preventDefault()
            {{!-- console.log("clicked") --}}
            var id = $(this).attr("data-id")
            var request = {
                "url" : `http://localhost:3000/staffDatabase/${id}`,
                "method" : "delete"
            }
            if(confirm("Do you really want to delete this record")){
                $.ajax(request).done(function(response){
                    alert("data deleted successfully")
                    location.reload()
                })
            }
        })
    </script>
    <script src="https://use.fontawesome.com/41270f7230.js"></script>
</body>
</html>